<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>2026 ëŒ€í•™ì²­ë…„ë¶€ ë¶„ê³¼ ë“œë˜í”„íŠ¸ (ìµœì¢… ë³´ì™„ - í°íŠ¸ í™•ëŒ€)</title>
    <style>
        /* --- CSS Start --- */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        /* ì œëª© í°íŠ¸ í¬ê¸° í™•ëŒ€ */
        h1 {
            font-size: 2.5em; 
            margin-bottom: 0.5em;
        }

        .container {
            display: flex;
            gap: 20px;
        }

        .draft-area {
            flex: 3; 
            overflow-x: auto;
        }

        .roster-area {
            flex: 1; 
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* --- í…Œì´ë¸” ìŠ¤íƒ€ì¼ --- */
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            table-layout: fixed; 
        }

        th, td {
            border: 1px solid #ccc;
            padding: 6px; /* íŒ¨ë”© ì•½ê°„ í™•ëŒ€ */
            text-align: center;
            vertical-align: middle; /* í…ìŠ¤íŠ¸ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
            /* â˜… ìˆ˜ì •ë¨: í…Œì´ë¸” ê¸°ë³¸ ê¸€ì í¬ê¸° ëŒ€í­ í™•ëŒ€ */
            font-size: 1.25em; 
            word-break: keep-all; 
        }

        /* ì»¬ëŸ¼ í­ ì¡°ì • (ì´ 8ê°œ ì»¬ëŸ¼) */
        thead tr th:nth-child(1) { width: 10%; } 
        thead tr th:nth-child(2) { width: 12%; } 
        thead tr th:nth-child(3) { width: 12%; } 
        thead tr th:nth-child(4) { width: 12%; } 
        thead tr th:nth-child(5) { width: 12%; } 
        thead tr th:nth-child(6) { width: 12%; } 
        thead tr th:nth-child(7) { width: 18%; } 
        thead tr th:nth-child(8) { width: 12%; } 

        thead th {
            background-color: #333;
            color: white;
            /* â˜… ìˆ˜ì •ë¨: í—¤ë” ê¸€ì í¬ê¸° í™•ëŒ€ */
            font-size: 1.1em; 
            padding: 10px 0; /* í—¤ë” ë†’ì´ í™•ë³´ */
        }

        /* í‹°ì–´ë³„ ë°°ê²½ìƒ‰ */
        .darkgray-bg { background-color: darkgray; }
        .lightgray-bg-row { background-color: lightgray; }
        .row-D { background-color: #e6e6e6; }
        .row-E { background-color: #f2f2f2; }


        /* --- ë“œë˜í”„íŠ¸ ì¹¸ ìŠ¤íƒ€ì¼ --- */
        .draft-slots {
            display: flex;
            flex-direction: column;
            gap: 4px; /* ê°„ê²© ì•½ê°„ í™•ëŒ€ */
            padding: 2px 0;
        }
        
        .draft-slot {
            /* â˜… ìˆ˜ì •ë¨: ì¹¸ ë†’ì´ ëŒ€í­ í™•ëŒ€ (ê¸€ìê°€ ì»¤ì¡Œìœ¼ë¯€ë¡œ) */
            height: 45px; 
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            /* â˜… ìˆ˜ì •ë¨: ìš°ì„ ìˆœìœ„ ë²ˆí˜¸ í¬ê¸° ëŒ€í­ í™•ëŒ€ */
            font-size: 1.6em; 
            color: #333;
        }
        
        .draft-slot.blank {
            cursor: pointer;
            color: #007bff; 
        }

        .draft-slot.blank.filled {
            font-weight: normal;
            /* â˜… ìˆ˜ì •ë¨: ì±„ì›Œì§„ ì´ë¦„ í¬ê¸° í™•ëŒ€ */
            font-size: 1.35em; 
            cursor: default;
            color: #333;
            border: 1px solid #aaa;
        }
        
        /* ê³ ì •ëœ ì¹¸ ìŠ¤íƒ€ì¼ */
        .draft-slot.fixed-slot {
            background-color: #c0c0c0 !important;
            color: #444;
            /* â˜… ìˆ˜ì •ë¨: ê³ ì • ì¹¸ ê¸€ì í¬ê¸° í™•ëŒ€ */
            font-size: 1.2em;
            cursor: default;
            font-weight: normal;
            border: 1px solid #aaa;
        }

        /* ì¹¸ ë°°ê²½ìƒ‰ */
        .lightgreen-bg-slot { background-color: #ccffcc; }
        .lightyellow-bg-slot { background-color: #ffffcc; }
        .lightcoral-bg-slot { background-color: #ffdddd; }
        .lightblue-bg-slot { background-color: #cceeff; }
        .lightgray-bg-slot { background-color: #eeeeee; }

        /* ë“œë˜ê·¸ ì˜¤ë²„ íš¨ê³¼ */
        .draft-slot.blank.drag-over {
            box-shadow: 0 0 10px 3px rgba(0, 123, 255, 0.6) inset;
        }
        
        /* --- ë²„íŠ¼ ìŠ¤íƒ€ì¼ --- */
        .priority-btn {
            padding: 8px 15px; /* ë²„íŠ¼ í¬ê¸° í™•ëŒ€ */
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            /* â˜… ìˆ˜ì •ë¨: íˆ¬í‘œ ë²„íŠ¼ ì´ëª¨ì§€ í¬ê¸° í™•ëŒ€ */
            font-size: 1.5em; 
        }

        .priority-btn:hover {
            background-color: #0056b3;
        }

        /* ë˜ëŒë¦¬ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #undo-button {
            padding: 15px 20px; /* ë²„íŠ¼ ë„‰ë„‰í•˜ê²Œ */
            /* â˜… ìˆ˜ì •ë¨: ë²„íŠ¼ ê¸€ì í™•ëŒ€ */
            font-size: 1.2em; 
            font-weight: bold;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            transition: background-color 0.3s;
        }

        #undo-button:hover {
            background-color: #c82333;
        }

        #undo-button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        /* --- ëª…ë‹¨ ìŠ¤í‹°ì»¤ ìŠ¤íƒ€ì¼ --- */
        #roster-area-sections {
            border: 1px solid #ccc;
            padding: 15px;
            background-color: #fff;
        }
        
        .roster-section {
            margin-bottom: 15px;
            padding: 5px;
            border-bottom: 1px solid #eee;
        }
        
        .roster-section h3 {
            margin: 5px 0 10px 0;
            /* â˜… ìˆ˜ì •ë¨: ëª…ë‹¨ ê·¸ë£¹ ì œëª© í™•ëŒ€ */
            font-size: 1.3em; 
            border-left: 6px solid #007bff;
            padding-left: 8px;
        }

        .name-sticker {
            display: inline-block;
            padding: 10px 16px; /* ìŠ¤í‹°ì»¤ í¬ê¸° í™•ëŒ€ */
            margin: 5px;
            border: 1px solid #ffd54f;
            border-radius: 5px;
            cursor: grab;
            font-weight: bold;
            /* â˜… ìˆ˜ì •ë¨: ìŠ¤í‹°ì»¤ ì´ë¦„ ê¸€ì í™•ëŒ€ */
            font-size: 1.2em; 
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            opacity: 1;
            transition: opacity 0.3s;
        }

        /* ìŠ¤í‹°ì»¤ ë°°ê²½ìƒ‰ */
        .sticker-A { background-color: #ccffcc; }
        .sticker-B { background-color: #ffffcc; }
        .sticker-C { background-color: #ffdddd; }
        .sticker-D { background-color: #cceeff; }
        .sticker-E { background-color: #eeeeee; }

        .name-sticker.dragging {
            opacity: 0.7;
        }

        .name-sticker.hidden {
            display: none;
        }
        /* --- CSS End --- */
    </style>
</head>
<body>

    <header>
        <h1>2026 ëŒ€í•™ì²­ë…„ë¶€ ë¶„ê³¼ ë“œë˜í”„íŠ¸</h1>
    </header>

    <div class="container">
        <div class="draft-area">
            <table>
                <thead>
                    <tr>
                        <th>ì—°ì°¨</th>
                        <th>ê¸°íš(ìµœëŒ€í¥)</th>
                        <th>ì˜ˆë°°(ê¹€íƒœê´‘)</th>
                        <th>ì–‘ìœ¡(ì‹ ê²½í›ˆ)</th>
                        <th>ì„ êµ(ì¡°ì€ê´‘)</th>
                        <th>ì‚¬ì—­(ì „ì§„)</th>
                        <th>ìº í¼ìŠ¤(ì˜¤í˜„êµ)</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-tier="B" class="lightgray-bg-row">
                        <td>ì „ì„ 1~2ë…„ì°¨</td>
                        <td>
                            <div class="draft-slots">
                                <div class="draft-slot fixed-slot" data-col="ê¸°íš" data-tier="B" id="fixed-recruit-B">ì‹ ì…</div>
                            </div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightyellow-bg-slot" data-col="ì˜ˆë°°" data-tier="B" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots">
                                <div class="draft-slot blank lightyellow-bg-slot" data-col="ì–‘ìœ¡" data-tier="B" data-slot-order="1"></div>
                                <div class="draft-slot blank lightyellow-bg-slot" data-col="ì–‘ìœ¡" data-tier="B" data-slot-order="2"></div>
                            </div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightyellow-bg-slot" data-col="ì„ êµ" data-tier="B" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightyellow-bg-slot" data-col="ì‚¬ì—­" data-tier="B" data-slot-order="1"></div></div>
                        </td>
                        <td></td>
                        <td><button class="priority-btn" data-tier="B">ğŸ—³ï¸</button></td>
                    </tr>
                    <tr data-tier="A" class="darkgray-bg">
                        <td>ì „ì„ 3ë…„ì°¨~</td>
                        <td></td>
                        <td></td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightgreen-bg-slot" data-col="ì–‘ìœ¡" data-tier="A" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots">
                                <div class="draft-slot blank lightgreen-bg-slot" data-col="ì„ êµ" data-tier="A" data-slot-order="1"></div>
                                <div class="draft-slot blank lightgreen-bg-slot" data-col="ì„ êµ" data-tier="A" data-slot-order="2"></div>
                            </div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightgreen-bg-slot" data-col="ì‚¬ì—­" data-tier="A" data-slot-order="1"></div></div>
                        </td>
                        <td></td>
                        <td><button class="priority-btn" data-tier="A">ğŸ—³ï¸</button></td>
                    </tr>
                    <tr data-tier="E" class="row-E">
                        <td>íŒŒíŠ¸ 1ë…„ì°¨</td>
                        <td></td>
                        <td>
                            <div class="draft-slots">
                                <div class="draft-slot blank lightgray-bg-slot" data-col="ì˜ˆë°°" data-tier="E" data-slot-order="1"></div>
                                <div class="draft-slot blank lightgray-bg-slot" data-col="ì˜ˆë°°" data-tier="E" data-slot-order="2"></div>
                            </div>
                        </td>
                        <td></td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightgray-bg-slot" data-col="ì„ êµ" data-tier="E" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightgray-bg-slot" data-col="ì‚¬ì—­" data-tier="E" data-slot-order="1"></div></div>
                        </td>
                        <td></td>
                        <td><button class="priority-btn" data-tier="E">ğŸ—³ï¸</button></td>
                    </tr>
                    <tr data-tier="D" class="row-D">
                        <td>íŒŒíŠ¸ 2ë…„ì°¨</td>
                        <td></td>
                        <td>
                            <div class="draft-slots">
                                <div class="draft-slot blank lightblue-bg-slot" data-col="ì˜ˆë°°" data-tier="D" data-slot-order="1"></div>
                                <div class="draft-slot blank lightblue-bg-slot" data-col="ì˜ˆë°°" data-tier="D" data-slot-order="2"></div>
                            </div>
                        </td>
                        <td>
                            <div class="draft-slots">
                                <div class="draft-slot blank lightblue-bg-slot" data-col="ì–‘ìœ¡" data-tier="D" data-slot-order="1"></div>
                                <div class="draft-slot blank lightblue-bg-slot" data-col="ì–‘ìœ¡" data-tier="D" data-slot-order="2"></div>
                            </div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightblue-bg-slot" data-col="ì„ êµ" data-tier="D" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots">
                                <div class="draft-slot blank lightblue-bg-slot" data-col="ì‚¬ì—­" data-tier="D" data-slot-order="1"></div>
                                <div class="draft-slot blank lightblue-bg-slot" data-col="ì‚¬ì—­" data-tier="D" data-slot-order="2"></div>
                            </div>
                        </td>
                        <td></td>
                        <td><button class="priority-btn" data-tier="D">ğŸ—³ï¸</button></td>
                    </tr>
                    <tr data-tier="C" class="darkgray-bg">
                        <td>íŒŒíŠ¸ 3ë…„ì°¨</td>
                        <td></td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightcoral-bg-slot" data-col="ì˜ˆë°°" data-tier="C" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightcoral-bg-slot" data-col="ì–‘ìœ¡" data-tier="C" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightcoral-bg-slot" data-col="ì„ êµ" data-tier="C" data-slot-order="1"></div></div>
                        </td>
                        <td>
                            <div class="draft-slots"><div class="draft-slot blank lightcoral-bg-slot" data-col="ì‚¬ì—­" data-tier="C" data-slot-order="1"></div></div>
                        </td>
                        <td></td>
                        <td><button class="priority-btn" data-tier="C">ğŸ—³ï¸</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="roster-area">
            <button id="undo-button" disabled>âª í•œ ë‹¨ê³„ ë˜ëŒë¦¬ê¸°</button>
            
            <div id="roster-area-sections">
                <h2>ë“œë˜í”„íŠ¸ ëª…ë‹¨</h2>
                </div>
        </div>
    </div>

    <script>
        /* --- JavaScript Start --- */
        document.addEventListener('DOMContentLoaded', () => {
            // 1. ëª…ë‹¨ ë°ì´í„° ë° ìƒíƒœ ê´€ë¦¬
            const rosterData = {
                'B': { name: 'ì „ì„ 1~2ë…„ì°¨', list: ['ê¹€í˜„', 'ê¸¸í•œì†”', 'ì´ìŠ¹í˜¸', 'ìµœê°•í˜¸', 'í™ê·¼ì˜'], count: 5, colorClass: 'sticker-B' },
                'A': { name: 'ì „ì„ 3ë…„ì°¨~', list: ['ë°•ì„±ì›', 'ë°•ì„±í›ˆ', 'ì´ì§„ê¸°', 'ìµœì¬ìœ¤'], count: 4, colorClass: 'sticker-A' },
                'E': { name: 'íŒŒíŠ¸ 1ë…„ì°¨', list: ['ì´ë‚˜ë‹¨', 'ì‹ ì§€ìˆ˜', 'ê¹€ì˜ë²”', 'ì‹ ì…'], count: 4, colorClass: 'sticker-E' },
                'D': { name: 'íŒŒíŠ¸ 2ë…„ì°¨', list: ['ê¶Œí˜ì„±', 'ë°•ì‹œì˜¨', 'ë°•ì§€ìœ¤', 'ë°°ìœ¤ì£¼', 'ì˜¤ì§„ìš°', 'ì´ì€ì°¬', 'ì¡°ì˜ì°¬'], count: 7, colorClass: 'sticker-D' },
                'C': { name: 'íŒŒíŠ¸ 3ë…„ì°¨', list: ['êµ¬ê¸¸ëª¨', 'ì´ì˜ˆì°¬', 'ì¥ê±´ìš°', 'ì •ì°¬ì¤‘'], count: 4, colorClass: 'sticker-C' }
            };

            const sectionsContainer = document.getElementById('roster-area-sections');
            const priorityButtons = document.querySelectorAll('.priority-btn');
            const draftBlanks = document.querySelectorAll('.draft-slot.blank'); 
            const undoButton = document.getElementById('undo-button'); 

            // ìƒíƒœ ì €ì¥ ìŠ¤íƒ: { slotElement: DOM, name: string, originalText: string } í˜•íƒœë¡œ ì €ì¥
            const historyStack = [];
            
            // ë¹ˆì¹¸ ë°°ì—´ (ê° í‹°ì–´ë³„ ìˆœì„œëŒ€ë¡œ)
            const tierBlanks = {
                'B': Array.from(document.querySelectorAll('.draft-slot.blank[data-tier="B"]')), 
                'A': Array.from(document.querySelectorAll('.draft-slot.blank[data-tier="A"]')), 
                'E': Array.from(document.querySelectorAll('.draft-slot.blank[data-tier="E"]')), 
                'D': Array.from(document.querySelectorAll('.draft-slot.blank[data-tier="D"]')), 
                'C': Array.from(document.querySelectorAll('.draft-slot.blank[data-tier="C"]'))
            };
            
            // Fisher-Yates ì…”í”Œ í•¨ìˆ˜
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // 2. ëª…ë‹¨ ìŠ¤í‹°ì»¤ ìƒì„±
            function createStickers() {
                sectionsContainer.innerHTML = '<h2>ë“œë˜í”„íŠ¸ ëª…ë‹¨</h2>';
                
                Object.keys(rosterData).forEach(tier => {
                    const data = rosterData[tier];
                    
                    const section = document.createElement('div');
                    section.className = 'roster-section';
                    
                    const title = document.createElement('h3');
                    title.textContent = data.name;
                    section.appendChild(title);
                    
                    data.list.forEach(name => {
                        const sticker = document.createElement('div');
                        sticker.className = `name-sticker ${data.colorClass}`;
                        sticker.draggable = true;
                        sticker.textContent = name;
                        sticker.id = `sticker-${name}`;
                        sticker.setAttribute('data-tier', tier);
                        section.appendChild(sticker);
                    });
                    sectionsContainer.appendChild(section);
                });
            }

            // 3. ìš°ì„ ìˆœìœ„ ë¶€ì—¬ ë¡œì§ (ìˆœì°¨ì  ë²ˆí˜¸ ë¶€ì—¬ + ëœë¤ ì¹¸ ë°°ì—´ + 0.7ì´ˆ ê°„ê²©)
            function setPriorities(tier) {
                const blanks = tierBlanks[tier].filter(b => !b.classList.contains('filled'));
                if (blanks.length === 0) return;

                // 1. ìŠ¬ë¡¯ì„ 1ìˆœìœ„ì™€ 2ìˆœìœ„ë¡œ ë¶„ë¦¬
                let round1Slots = blanks.filter(b => b.getAttribute('data-slot-order') === '1');
                let round2Slots = blanks.filter(b => b.getAttribute('data-slot-order') === '2');
                
                // 2. ê° ë¼ìš´ë“œ ë‚´ì—ì„œ ë¬´ì‘ìœ„ë¡œ ì„ê¸° (ëœë¤ ì¹¸ ë°°ì—´)
                round1Slots = shuffle(round1Slots);
                round2Slots = shuffle(round2Slots);

                // 3. ìµœì¢… í• ë‹¹ ìˆœì„œ ì •ì˜ (1ìˆœìœ„ ì¹¸ ë¨¼ì €, 2ìˆœìœ„ ì¹¸ ë‚˜ì¤‘ì—)
                const finalAssignmentOrder = [...round1Slots, ...round2Slots];
                
                // 4. ìˆœì°¨ì ìœ¼ë¡œ 0.7ì´ˆ ê°„ê²©ìœ¼ë¡œ 1ë¶€í„° ë²ˆí˜¸ ë¶€ì—¬
                finalAssignmentOrder.forEach((slot, index) => {
                    const priorityNumber = index + 1; // 1, 2, 3, 4, ... ìˆœì°¨ì  ë²ˆí˜¸
                    const delayTime = index * 700; // 0.7ì´ˆ ê°„ê²©

                    // ë”œë ˆì´ í›„ ë²ˆí˜¸ ë¶€ì—¬
                    setTimeout(() => {
                        slot.textContent = priorityNumber;
                    }, delayTime);
                });
            }

            // 4. ë˜ëŒë¦¬ê¸° ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            function updateUndoButton() {
                undoButton.disabled = historyStack.length === 0;
            }

            // 5. íˆ¬í‘œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            priorityButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const tier = e.currentTarget.getAttribute('data-tier');
                    setPriorities(tier);
                });
            });

            // 6. ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            let draggedSticker = null;

            sectionsContainer.addEventListener('dragstart', (e) => {
                if (e.target.classList.contains('name-sticker')) {
                    draggedSticker = e.target;
                    e.dataTransfer.setData('text/plain', draggedSticker.textContent);
                    e.dataTransfer.setData('tier', draggedSticker.getAttribute('data-tier'));
                    setTimeout(() => {
                        draggedSticker.classList.add('dragging');
                    }, 0);
                }
            });

            sectionsContainer.addEventListener('dragend', () => {
                if (draggedSticker) {
                    draggedSticker.classList.remove('dragging');
                    draggedSticker = null;
                }
            });

            draftBlanks.forEach(blank => {
                blank.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    
                    const isRanked = !isNaN(parseInt(blank.textContent));
                    const dragTier = e.dataTransfer.getData('tier');
                    const slotTier = blank.getAttribute('data-tier');
                    const isTierMatch = dragTier === slotTier;
                    
                    // ìˆœìœ„ ë²ˆí˜¸ê°€ ìˆê³ , ì•„ì§ ì±„ì›Œì§€ì§€ ì•Šì•˜ìœ¼ë©°, í‹°ì–´ê°€ ì¼ì¹˜í•  ë•Œë§Œ ë“œë˜ê·¸ ì˜¤ë²„ í—ˆìš©
                    if (!blank.classList.contains('filled') && isRanked && isTierMatch) {
                        blank.classList.add('drag-over');
                    }
                });

                blank.addEventListener('dragleave', () => {
                    blank.classList.remove('drag-over');
                });

                blank.addEventListener('drop', (e) => {
                    e.preventDefault();
                    blank.classList.remove('drag-over');
                    
                    const isRanked = !isNaN(parseInt(blank.textContent));
                    const isTierMatch = draggedSticker && draggedSticker.getAttribute('data-tier') === blank.getAttribute('data-tier');

                    if (draggedSticker && !blank.classList.contains('filled') && isRanked && isTierMatch) {
                        const name = draggedSticker.textContent;
                        
                        // 1. ìƒíƒœ ì €ì¥ (Undo ê¸°ëŠ¥ì„ ìœ„í•´: í˜„ì¬ í…ìŠ¤íŠ¸(ìˆœìœ„ ë²ˆí˜¸) ì €ì¥)
                        historyStack.push({
                            slotElement: blank,
                            name: name,
                            originalText: blank.textContent // ìˆœìœ„ ë²ˆí˜¸ ì €ì¥
                        });
                        
                        // 2. ì¹¸ ì±„ìš°ê¸° (ì´ë¦„ìœ¼ë¡œ ë®ì–´ì“°ê¸°)
                        blank.textContent = name;
                        blank.classList.add('filled');
                        
                        // 3. ìŠ¤í‹°ì»¤ ìˆ¨ê¸°ê¸°
                        draggedSticker.classList.add('hidden');

                        updateUndoButton();
                    }
                });
            });

            // 7. í•œ ë‹¨ê³„ ë˜ëŒë¦¬ê¸° ê¸°ëŠ¥ êµ¬í˜„
            undoButton.addEventListener('click', () => {
                if (historyStack.length > 0) {
                    const lastAction = historyStack.pop();
                    const slot = lastAction.slotElement;
                    const name = lastAction.name;
                    const originalText = lastAction.originalText;

                    // 1. ìŠ¬ë¡¯ ë³µêµ¬: ì±„ì›Œì§„ ìƒíƒœ í•´ì œ ë° ìˆœìœ„ ë²ˆí˜¸ ë³µêµ¬ (ë‹¤ì‹œ ë“œë˜ê·¸ ê°€ëŠ¥ ìƒíƒœ)
                    slot.classList.remove('filled');
                    slot.textContent = originalText; // ìˆœìœ„ ë²ˆí˜¸ ë³µêµ¬

                    // 2. ìŠ¤í‹°ì»¤ ë³µêµ¬: ìˆ¨ê¹€ ìƒíƒœ í•´ì œ
                    const sticker = document.getElementById(`sticker-${name}`);
                    if (sticker) {
                        sticker.classList.remove('hidden');
                    }
                    
                    updateUndoButton();
                }
            });

            // ì´ˆê¸°í™” ë° ì‹¤í–‰
            createStickers();
            updateUndoButton(); // ì´ˆê¸° ë²„íŠ¼ ìƒíƒœ ì„¤ì •
        });
        /* --- JavaScript End --- */
    </script>
</body>
</html>
